<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="jakarta.faces.facelets"
                template="/templates/templateAdmin.xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="jakarta.faces.core"
                xmlns:a="http://elit.dz/ui" >

    <ui:define name="Title" >
        Gestion des Cheques
    </ui:define >

    <ui:define name="breadCrumb">
        <a:breadcrumb>
            <a:menuitem value="Gestion des Cheques" />
            <a:menuitem value="List des Cheques" href="listCheque.xhtml" last="true" />
        </a:breadcrumb>
    </ui:define>

    <ui:define name="MyContent">
        <h:form id="form"> 
            <p:growl id="messages" showDetail="true" />
            <p:toolbar>
                <p:toolbarGroup>
                    <p:commandButton value="New" icon="pi pi-plus" actionListener="#{listChequeController.addCheque}"
                                     update=":dialogs:manage-cheque-content" oncomplete="PF('manageChequeDialog').show()"
                                     styleClass="ui-button-success" style="margin-right: .5rem">
                        <p:resetInput target=":dialogs:manage-cheque-content" />
                    </p:commandButton>
                    <p:commandButton id="delete-cheques-button" value="#{listChequeController.deleteButtonMessage}"
                                     icon="pi pi-trash" actionListener="#{listChequeController.deleteSelectedProducts}"
                                     styleClass="ui-button-danger" disabled="#{!listChequeController.hasSelectedCheques()}" update="@this">
                        <p:confirm header="Confirmation" message="Supprimer les cheques sélectionnés ?"
                                   icon="pi pi-exclamation-triangle" />
                    </p:commandButton>
                </p:toolbarGroup>
                <p:toolbarGroup align="right">
                    <p:fileUpload mode="simple" skinSimple="true" label="Importer" chooseIcon="pi pi-download" />
                    <p:commandButton value="Exporter" icon="pi pi-upload" styleClass="ui-button-help" ajax="false">
                        <p:dataExporter type="pdf" target="dt-cheques" fileName="cheques" />
                    </p:commandButton>
                </p:toolbarGroup>
            </p:toolbar>
            <a:row>
                <a:panel header="Liste des Chèques"  iconheader="fa fa-list-ul">
                    <p:dataTable value="#{listChequeController.listCheques}" var="cheque" emptyMessage="Liste Vide !" reflow="true" paginator="true" paginatorPosition="bottom" paginatorAlwaysVisible="true" rows="8" rowKey="#{cheque.id}">
                        <p:ajax event="rowSelect" update=":form:delete-cheques-button" />
                        <p:ajax event="rowUnselect" update=":form:delete-cheques-button" />
                        <p:ajax event="rowSelectCheckbox" update=":form:delete-cheques-button" />
                        <p:ajax event="rowUnselectCheckbox" update=":form:delete-cheques-button" />
                        <p:ajax event="toggleSelect" update=":form:delete-cheques-button" />
                        <p:column selectionMode="multiple" exportable="false"></p:column>
                        <p:column headerText="Nom Chèque">
                            <h:outputText value="#{cheque.nomCheque}"/>
                        </p:column>
                        <p:column headerText="Num Chèque">
                            <h:outputText value="#{cheque.numCheque}"/>                           
                        </p:column>
                        <p:column headerText="Montant">
                            <h:outputText value="#{cheque.montant}"/></p:column>
                        <p:column headerText="Date de Creation">
                            <h:outputText value="#{cheque.dateCreation}" >
                            </h:outputText>
                        </p:column>
                        <p:column headerText="Rip">
                            <h:outputText  value="#{cheque.rip}"/>                           
                        </p:column>
                        <p:column headerText="État">
                            <h:outputText  value="#{cheque.etat}"/>                           
                        </p:column>
                        <p:column headerText="Banque">
                            <h:outputText  value="#{cheque.banqueCheque.code}"/>                           
                        </p:column>
                        <p:column headerText="Date d'Envoi a la Banque">
                            <h:outputText value="#{cheque.dateEnvoiBanque}" >
                            </h:outputText>                           
                        </p:column>
                        <p:column headerText="date d'Envoi à la DD">
                            <h:outputText value="#{cheque.dateEnvoiDd}" >
                            </h:outputText>                           
                        </p:column>
                        <p:column headerText="Date de l'Encaissement">
                            <h:outputText value="#{cheque.dateEncaissement}" >
                            </h:outputText>                           
                        </p:column>
                        <p:column headerText="Num Facture">
                            <h:outputText  value="#{cheque.numFacture}"/>                           
                        </p:column>
                        <p:column headerText="Montant Facture">
                            <h:outputText  value="#{cheque.montantFacture}"/>                           
                        </p:column>
                        <p:column headerText="Code Client">
                            <h:outputText  value="#{cheque.codeClient}"/>                           
                        </p:column>
                    </p:dataTable> 
                </a:panel>
            </a:row>
        </h:form>  
        <h:form id="dialogs">
            <p:dialog header="Chèque Infos" showEffect="fade" modal="true" widgetVar="manageChequeDialog"
                      responsive="true" width="70%">
                <p:outputPanel id="manage-cheque-content" class="ui-fluid">
                    <p:outputPanel rendered="#{not empty listChequeController.cheque}">

<!--<p:graphicImage name="images/product/#{crudView.selectedProduct.image}" library="demo"
    styleClass="product-image" rendered="#{not empty crudView.selectedProduct.image}" />-->

                        <div class="field">
                            <p:outputLabel for="nomCheque">Nom Chèque</p:outputLabel>
                            <p:inputText id="nomCheque" value="#{listChequeController.cheque.nomCheque}" required="true" />
                        </div>
                        <div class="field">
                            <p:outputLabel for="numCheque">Num Chèque</p:outputLabel>
                            <p:inputTextarea id="numCheque" value="#{listChequeController.cheque.numCheque}" required="true" />
                        </div>
                        <div class="field col">
                            <p:outputLabel for="montant">Montant</p:outputLabel>
                            <p:inputNumber id="montant" value="#{listChequeController.cheque.montant}" symbol=" DZD"
                                           symbolPosition="s" decimalSeparator="." thousandSeparator="," />
                        </div>
                        <div class="field">
                            <p:outputLabel for="rip">Rip</p:outputLabel>
                            <p:inputTextarea id="rip" value="#{listChequeController.cheque.rip}" required="true" />
                        </div>
                        <div class="field">
                            <p:outputLabel for="etat">État</p:outputLabel>
                            <p:selectOneRadio id="etat" value="#{listChequeController.cheque.etat}"
                                              layout="responsive" columns="2" required="true" >
                                <f:selectItem itemLabel="Payé" itemValue="Payé" />
                                <f:selectItem itemLabel="En Attante" itemValue="En Attante" />
                                <f:selectItem itemLabel="Impayé" itemValue="Impayé" />
                            </p:selectOneRadio>                    
                        </div>
                        <div class="field">
                            <p:outputLabel for="Banque">Banque</p:outputLabel>
                            <p:inputTextarea id="Banque" value="#{listChequeController.cheque.banqueCheque.code}" required="true" />
                        </div>
                        <div class="field">
                            <p:outputLabel for="numFacture">Num Facture</p:outputLabel>
                            <p:inputTextarea id="numFacture" value="#{listChequeController.cheque.numFacture}" />
                        </div>
                        <div class="field">
                            <p:outputLabel for="montantFacture">Montant Facture</p:outputLabel>
                            <p:inputTextarea id="montantFacture" value="#{listChequeController.cheque.montantFacture}" />
                        </div>
                        <div class="field">
                            <p:outputLabel for="codeClient">Code Client</p:outputLabel>
                            <p:inputTextarea id="codeClient" value="#{listChequeController.cheque.codeClient}" />
                        </div>

                        <!--<div class="formgrid grid">
                            <div class="field col">
                                <p:outputLabel for="price">Price</p:outputLabel>
                                <p:inputNumber id="price" value="#{crudView.selectedProduct.price}" symbol=" USD"
                                    symbolPosition="s" decimalSeparator="." thousandSeparator="," />
                            </div>
                            <div class="field col">
                                <p:outputLabel for="quantity">Quantity</p:outputLabel>
                                <p:spinner id="quantity" min="0" value="#{crudView.selectedProduct.quantity}" />
                            </div>
                        </div>-->

                    </p:outputPanel>
                </p:outputPanel>

                <f:facet name="footer">
                    <p:commandButton value="Sauvegarder" icon="pi pi-check" actionListener="#{listChequeController.cheque}"
                                     update="manage-cheque-content" process="manage-cheque-content @this" />
                    <p:commandButton value="Annuler" icon="pi pi-times" onclick="PF('manageChequeDialog').hide()"
                                     class="ui-button-secondary" type="button" />
                </f:facet>
            </p:dialog>
        </h:form>
    </ui:define>
</ui:composition>