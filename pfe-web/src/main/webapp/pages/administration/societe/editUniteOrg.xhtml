<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="jakarta.faces.facelets"
                template="/templates/templateAdmin.xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="jakarta.faces.core"
                xmlns:a="http://elit.dz/ui">

    <ui:define name="Title">
        #{bundleAdmin.titre_modifier_unite_org} 
    </ui:define>

    <ui:define name="breadCrumb">
        <a:breadcrumb>
            <a:menuitem value="#{bundleAdmin.titre_unite_orbanisationnelle}" />
            <a:menuitem value="#{bundleAdmin.lien_liste_unite_org}" href="listUniteOrg.xhtml" />
            <a:menuitem value="#{bundleCommun.btn_modifier}" last="true"/>
        </a:breadcrumb>
    </ui:define>

    <ui:define name="MyContent">
        <h:form id="form">
            <a:row>
                <p:messages id="msgs" globalOnly="true" showDetail="true"/>
                <h3 class="page-title">
                    <i class=""></i> Fiche Unité Organisationnelle
                </h3>
            </a:row>
            <p:panel id="panel" styleClass="no-border row">
                <p:tabView  id="tabView">
                    <p:tab title="#{bundleAdmin.lbl_information_generale}">
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_code}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="code" value="#{editUniteOrgController.societe.code}" required="true" label="#{bundleCommun.lbl_code}" />
                                    <p:message for="code" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_unite_parent}" span="4" />
                                <a:column span="8" >
                                    <a:row>
                                        <a:column span="2" >
                                            <p:commandButton  value=".." immediate="true" onclick="PF('dialogUniteParents').show();"/>
                                        </a:column>
                                        <a:column span="3" >
                                            <h:outputLabel id="codeParent" value="#{editUniteOrgController.societeSelected.code}" />
                                        </a:column>
                                        <a:column span="7" >
                                            <h:outputLabel id="descriptionParent" value="#{editUniteOrgController.societeSelected.denominationAr}" />
                                        </a:column>
                                    </a:row>
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_denomination_ar} " span="4" />
                                <a:column span="8" >
                                    <p:inputText id="denomination_ar" value="#{editUniteOrgController.societe.denominationAr}" required="true" label="#{bundleAdmin.lbl_denomination_ar}" />
                                    <p:message for="denomination_ar" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_denomination_fr}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="denomination_fr" value="#{editUniteOrgController.societe.denominationFr}" required="true" label="#{bundleAdmin.lbl_denomination_fr}" />
                                    <p:message for="denomination_fr" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_capital_social}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="capital_soc" value="#{editUniteOrgController.societe.capitalSocial}" label="#{bundleAdmin.lbl_capital_social}" />
                                    <p:message for="capital_soc" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_form_juridique}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="form_juridique" value="#{editUniteOrgController.societe.formeJuridique}" label="#{bundleAdmin.lbl_form_juridique}" size="40" />
                                    <p:message for="form_juridique" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_adresse}" span="4" />
                                <a:column span="8" >
                                    <p:inputTextarea id="adresse1" value="#{editUniteOrgController.societe.adresseRaisonSociale}" cols="60" label="#{bundleCommun.lbl_adresse}" />
                                    <p:message for="adresse1" />
                                </a:column>
                            </a:column>
                            <a:column span="6" rendered="#{editUniteOrgController.societe.typeUniteOrganisationnelle eq 'dd'}">
                                <a:label value="Acces Caisse/Hors Caisse (DD/Agence)" span="4" />
                                <a:column span="8" >
                                    <p:selectBooleanCheckbox id="autoriserAcces" value="#{editUniteOrgController.societe.autoriserAcces}"/>
                                    <p:message for="autoriserAcces" />
                                </a:column>
                            </a:column>
                        </a:row>
                    </p:tab>
                    <p:tab title="#{bundleAdmin.lbl_information_registre_de_commerce}">
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_numero}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="numero_registre_comm" value="#{editUniteOrgController.societe.numRegistreCommerce}" label="#{bundleCommun.lbl_numero}" />
                                    <p:message for="numero_registre_comm" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_date_delivrance}" span="4" />
                                <a:column span="8" >
                                    <p:calendar id="date_delivrance" value="#{editUniteOrgController.societe.dateDelivrance}" pattern="dd/MM/yyyy" label="#{bundleAdmin.lbl_date_delivrance}" readonlyInput="true"
                                                locale="fr" navigator="true"   >                        
                                    </p:calendar>
                                    <p:message for="date_delivrance" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_date_debut_activite}" span="4" />
                                <a:column span="8" >
                                    <p:calendar id="date_debut_activite" value="#{editUniteOrgController.societe.dateDebutActivite}" pattern="dd/MM/yyyy" label="#{bundleAdmin.lbl_date_debut_activite}" readonlyInput="true"
                                                locale="fr" navigator="true"   >                        
                                    </p:calendar>
                                    <p:message for="date_debut_activite" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_numéro_article_imposition}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="num_article_impo_rc" value="#{editUniteOrgController.societe.numArticleImposition}" label="#{bundleAdmin.lbl_numéro_article_imposition}" />
                                    <p:message for="num_article_impo_rc" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_numero_fiscal}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="num_fisc_rc" value="#{editUniteOrgController.societe.numFiscal}" label="#{bundleAdmin.lbl_numero_fiscal}" />
                                    <p:message for="num_fisc_rc" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_nis}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="nis" value="#{editUniteOrgController.societe.nis}" label="#{bundleAdmin.lbl_nis}" />
                                    <p:message for="num_article_impo_rc" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_wilaya}" span="4" />
                                <a:column span="8" >
                                    <p:selectOneMenu  id="wilaya2" value="#{editUniteOrgController.societe.wilayaRegistreCommerce}" label="#{bundleCommun.lbl_wilaya}" >
                                        <f:selectItem itemLabel="#{bundleCommun.titre_selectionner_wilaya}" itemValue="" noSelectionOption="true"/>
                                        <f:selectItems value="#{editUniteOrgController.wilayasRegistreCommerceMap}" />
                                        <p:ajax listener="#{editUniteOrgController.onWilayaRegistreCommerceChange}" update="commune2" />
                                    </p:selectOneMenu>
                                    <p:message for="wilaya2" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_commune}" span="4" />
                                <a:column span="8" >
                                    <p:selectOneMenu  id="commune2" value="#{editUniteOrgController.societe.communeRegistreCommerce}" label="#{bundleCommun.lbl_commune}">
                                        <f:selectItem itemLabel="#{bundleCommun.titre_selectionner_commune}" itemValue="" noSelectionOption="true"/>
                                        <f:selectItems value="#{editUniteOrgController.communesRegistreCommerceMap}"/>
                                    </p:selectOneMenu> 
                                    <p:message for="commune2" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_tin}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="tin" value="#{editUniteOrgController.societe.tin}" label="#{bundleAdmin.lbl_tin}"  />
                                    <p:message for="tin" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_adresse_registre_commerce}" span="4" />
                                <a:column span="8" >
                                    <p:inputTextarea id="adresse2" value="#{editUniteOrgController.societe.adresseRegistreCommerce}" cols="50" label="#{bundleAdmin.lbl_adresse_registre_commerce}" />
                                    <p:message for="adresse2" />
                                </a:column>
                            </a:column>
                        </a:row>
                    </p:tab>
                    <p:tab id="tabSecuriteSociale" title="#{bundleAdmin.lbl_information_securite_sociale}">
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_numéro_securite_social}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="code_activite_fiscale" value="#{editUniteOrgController.societe.codeActiviteFiscal}" label="#{bundleAdmin.lbl_numéro_securite_social}" />
                                    <p:message for="code_activite_fiscale" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_regime_fiscal}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="regime_fiscal" value="#{editUniteOrgController.societe.regimeFiscal}" label="#{bundleAdmin.lbl_regime_fiscal}"  />
                                    <p:message for="regime_fiscal" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>                              
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_wilaya}" span="4" />
                                <a:column span="8" >
                                    <p:selectOneMenu  id="wilaya" value="#{editUniteOrgController.societe.wilayaSecuriteSociale}" label="#{bundleCommun.lbl_wilaya}" >
                                        <f:selectItem itemLabel="#{bundleCommun.titre_selectionner_wilaya}" itemValue="" noSelectionOption="true"/>
                                        <f:selectItems value="#{editUniteOrgController.wilayasMap}" />
                                        <p:ajax listener="#{editUniteOrgController.onWilayaChange}" update="commune" />
                                    </p:selectOneMenu>
                                    <p:message for="wilaya" />
                                </a:column>
                            </a:column>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_commune}" span="4" />
                                <a:column span="8" >
                                    <p:selectOneMenu  id="commune" value="#{editUniteOrgController.societe.communeSecuriteSociale}" label="#{bundleCommun.lbl_commune}">
                                        <f:selectItem itemLabel="#{bundleCommun.titre_selectionner_commune}" itemValue="" noSelectionOption="true"/>
                                        <f:selectItems value="#{editUniteOrgController.communesMap}"/>
                                    </p:selectOneMenu> 
                                    <p:message for="commune" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleAdmin.lbl_adresse_securite_sociale}" span="4" />
                                <a:column span="8" >
                                    <p:inputTextarea id="adresse3" value="#{editUniteOrgController.societe.adresseSecuriteSociale}" cols="50" label="#{bundleAdmin.lbl_adresse_securite_sociale}">
                                    </p:inputTextarea>
                                    <p:message for="adresse3" />
                                </a:column>
                            </a:column> 
                        </a:row>
                    </p:tab>
                    <p:tab title="#{bundleCommun.lbl_contact}">
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_num_tel_a}" span="4" />
                                <a:column span="8" >
                                    <p:inputMask id="tel_a" value="#{editUniteOrgController.societe.teleA}" mask="(999) 99-99-99" label="#{bundleCommun.lbl_num_tel_a}" >
                                    </p:inputMask>
                                    <p:message for="tel_a" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_num_tel_b}" span="4" />
                                <a:column span="8" >
                                    <p:inputMask id="tel_b" value="#{editUniteOrgController.societe.teleB}" mask="(999) 99-99-99" label="#{bundleCommun.lbl_num_tel_b}" >
                                    </p:inputMask>
                                    <p:message for="tel_b" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_num_fax_a}" span="4" />
                                <a:column span="8" >
                                    <p:inputMask id="fax_a" value="#{editUniteOrgController.societe.faxA}" mask="(999) 99-99-99" label="#{bundleCommun.lbl_num_fax_a}" size="40" >
                                    </p:inputMask>
                                    <p:message for="fax_a" />
                                </a:column>
                            </a:column>   
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_num_fax_b}" span="4" />
                                <a:column span="8" >
                                    <p:inputMask id="fax_b" value="#{editUniteOrgController.societe.faxB}" mask="(999) 99-99-99" label="#{bundleCommun.lbl_num_fax_b}" >
                                    </p:inputMask>
                                    <p:message for="fax_b" />
                                </a:column>
                            </a:column>
                        </a:row>
                        <a:row>
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_email}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="email" value="#{editUniteOrgController.societe.email}" label="#{bundleCommun.lbl_email}" >
                                    </p:inputText>
                                    <p:message for="email" />
                                </a:column>
                            </a:column>  
                            <a:column span="6" >
                                <a:label value="#{bundleCommun.lbl_site_web}" span="4" />
                                <a:column span="8" >
                                    <p:inputText id="site_web" value="#{editUniteOrgController.societe.siteWeb}" label="#{bundleCommun.lbl_site_web}" size="40" >
                                    </p:inputText>
                                    <p:message for="site_web" />
                                </a:column>
                            </a:column>
                        </a:row>
                    </p:tab>
                </p:tabView>
            </p:panel>
            <a:row>
                <p:commandButton value="#{bundleCommun.btn_valider}" action="#{editUniteOrgController.edit()}" ajax="false"  icon="fa fa-check-square-o" />
                <p:commandButton value="#{bundleCommun.btn_retour}" immediate="true" icon="fa fa-reply" action="listUniteOrg" styleClass="GrayButton" ajax="false" />
            </a:row>
        </h:form>  

    </ui:define>
    <ui:define name="MyDialog">
        <h:form id="formDialogs">
            <p:dialog id="dialogUniteParentsId" header="#{bundleAdmin.lien_liste_unite_org}" modal="true" widgetVar="dialogUniteParents" width="640" position="center" >
                <h:panelGroup id="panelUniteParents">
                    <p:dataTable value="#{editUniteOrgController.listUniteOrgs}" var="uniteParent" 
                                 selectionMode="single" selection="#{editUniteOrgController.societeSelected}" rowKey="#{uniteParent.id}"                                
                                 emptyMessage="#{bundleCommun.msg_list_vide}" paginator="true" paginatorAlwaysVisible="false" rows="10">
                        <p:ajax event="rowSelect" update=":form:tabView:codeParent :form:tabView:descriptionParent" oncomplete="PF('dialogUniteParents').hide();" />
                        <p:column headerText="#{bundleAdmin.lbl_code}" filterBy="#{uniteParent.code}">
                            <h:outputText value="#{uniteParent.affichage}"/>
                        </p:column> 
                        <p:column headerText="#{bundleAdmin.lbl_denomination_ar}" filterBy="#{uniteParent.denominationAr}">
                            <h:outputText value="#{uniteParent.denominationAr}"/>
                        </p:column> 
                        <p:column headerText="#{bundleAdmin.lbl_denomination_fr}" filterBy="#{uniteParent.denominationFr}">
                            <h:outputText value="#{uniteParent.denominationFr}"/>
                        </p:column> 
                    </p:dataTable>
                </h:panelGroup>
            </p:dialog>
        </h:form>
    </ui:define>

</ui:composition>
